<div class="w-full max-w-[400px] mx-auto flex flex-col min-h-full bg-[#f5f6fb] pb-10">
    
    <header class="flex justify-between items-center p-4 sticky top-0 z-50 bg-[#f5f6fb]">
        <a href="sg.html" class="flex items-center gap-3 active:opacity-50 no-underline text-inherit">
            <img src="../main/dowod_files/arrow.svg" alt="Wróć" class="w-5 h-5" style="transform: rotate(180deg);">
            <h1 class="text-[22px] font-bold tracking-tight text-[#1a1e22]">mDowód</h1>
        </a>
    </header>

    <p class="text-center text-[13px] text-[#6e7382] mb-4 tracking-tight shrink-0">
        Czas: <span id="current-time" class="font-medium text-[#1a1e22]"></span>
    </p>

    <div class="px-4 mb-6 shrink-0">
        <main class="rounded-[24px] shadow-lg relative overflow-hidden bg-white">
            <div class="absolute inset-0 z-0 opacity-100 pointer-events-none bg-no-repeat" 
                 style="background-image: url('../main/dowod_files/dowodnowybg.svg'); background-size: cover; background-position: center;"></div>
            <div class="relative z-10 p-5 flex gap-4">
                <div class="flex flex-col shrink-0">
                    <div class="w-[110px] h-[142px] overflow-hidden rounded-xl shadow-sm bg-gray-50 border border-black/5">
                        <img src="image.png" alt="Zdjęcie" class="w-full h-full object-cover photo-bw">
                    </div>
                    <img src="../main/dowod_files/flaga.gif" alt="Flaga PL" class="w-12 mt-4 self-start">
                    <div class="mt-4 flex items-start gap-2 self-start text-[#6e7382] uppercase font-black text-[8px] leading-[1] tracking-tighter">
                        <img src="../main/dowod_files/godlo.png" alt="Godło" class="w-5">
                        <div class="flex flex-col">
                            <span>Rzeczpospolita</span>
                            <span>Polska</span>
                        </div>
                    </div>
                </div>
                <div class="flex flex-col gap-2 flex-1 pt-1 min-w-0">
                    <section class="flex flex-col">
                        <span class="text-[15px] font-bold uppercase leading-none text-[#1a1e22] break-words">{{name}}</span>
                        <span class="text-[11px] font-medium mt-0.5 text-[#6e7382]">Imię (imiona)</span>
                    </section>
                    <section class="flex flex-col">
                        <span class="text-[15px] font-bold uppercase leading-none text-[#1a1e22] break-words">{{surname}}</span>
                        <span class="text-[11px] font-medium mt-0.5 text-[#6e7382]">Nazwisko</span>
                    </section>
                    <section class="flex flex-col">
                        <span class="text-[15px] font-bold uppercase leading-none text-[#1a1e22]">POLSKIE</span>
                        <span class="text-[11px] font-medium mt-0.5 text-[#6e7382]">Obywatelstwo</span>
                    </section>
                    <section class="flex flex-col">
                        <span class="text-[15px] font-bold leading-none text-[#1a1e22]">{{birthDate}}</span>
                        <span class="text-[11px] font-medium mt-0.5 text-[#6e7382]">Data urodzenia</span>
                    </section>
                    <section class="flex flex-col">
                        <span class="text-[15px] font-bold leading-none text-[#1a1e22]">{{pesel}}</span>
                        <span class="text-[11px] font-medium mt-0.5 text-[#6e7382]">Numer PESEL</span>
                    </section>
                </div>
            </div>
            <div class="relative z-10 p-3.5 flex items-center gap-3 bg-white/50 backdrop-blur-md border-t border-black/5">
                <img src="../main/dowod_files/checkmark.svg" alt="OK" class="w-5 h-5">
                <span class="font-bold text-[13px] text-[#22c55e] tracking-tight">Dokument ważny</span>
            </div>
        </main>
    </div>

    <nav class="grid grid-cols-4 gap-2 px-4 mb-8 text-center shrink-0">
        <div class="flex flex-col items-center gap-2 cursor-pointer text-[#1a1e22] group trigger-error">
            <div class="w-14 h-14 rounded-full flex items-center justify-center shadow-md bg-white group-active:scale-95 transition-transform">
                <img src="../main/dowod_files/checkbo.png" class="w-6">
            </div>
            <span class="text-[11px] leading-tight font-bold opacity-90">Potwierdź dane</span>
        </div>
        <div class="flex flex-col items-center gap-2 cursor-pointer text-[#1a1e22] group trigger-error">
            <div class="w-14 h-14 rounded-full flex items-center justify-center shadow-md bg-white group-active:scale-95 transition-transform">
                <img src="../main/dowod_files/card.png" class="w-6">
            </div>
            <span class="text-[11px] leading-tight font-bold opacity-90">Dane dowodu</span>
        </div>
        <div class="flex flex-col items-center gap-2 cursor-pointer text-[#1a1e22] group trigger-error">
            <div class="w-14 h-14 rounded-full flex items-center justify-center shadow-md bg-white group-active:scale-95 transition-transform">
                <img src="../main/dowod_files/pesellogo.svg" class="w-6">
            </div>
            <span class="text-[11px] leading-tight font-bold opacity-90">Zastrzeż PESEL</span>
        </div>
        <div class="flex flex-col items-center gap-2 cursor-pointer text-[#1a1e22] group trigger-error">
            <div class="w-14 h-14 rounded-full flex items-center justify-center shadow-md bg-white group-active:scale-95 transition-transform">
                <div class="flex flex-col gap-1">
                    <div class="w-1 h-1 bg-gray-500 rounded-full"></div>
                    <div class="w-1 h-1 bg-gray-500 rounded-full"></div>
                    <div class="w-1 h-1 bg-gray-500 rounded-full"></div>
                </div>
            </div>
            <span class="text-[11px] leading-tight font-bold opacity-90">Więcej</span>
        </div>
    </nav>

    <div class="px-4 flex flex-col gap-4 mb-10 shrink-0">
        <section class="p-5 rounded-[20px] shadow-sm bg-white">
            <div class="flex justify-between items-start">
                <div class="flex flex-col flex-1">
                    <span class="text-[12px] text-[#6e7382] font-medium mb-1">Seria i numer</span>
                    <span id="serial-number" class="text-[16px] font-bold text-[#1a1e22] tracking-wide">{{serialNumber}}</span>
                    <p class="text-[11px] text-[#6e7382] mt-2 leading-tight">Dane mDowodu i dowodu osobistego są inne - to dwa różne dokumenty.</p>
                </div>
                <button id="btn-copy" class="bg-blue-50 text-blue-600 px-4 py-1.5 rounded-full font-bold text-[13px] active:scale-95 transition-all shrink-0">Kopiuj</button>
            </div>
            <hr class="my-4 border-gray-100">
            <div class="flex flex-col gap-5">
                <div class="flex flex-col"><span class="text-[12px] text-[#6e7382] font-medium mb-0.5">Termin ważności</span><span class="text-[15px] font-bold text-[#1a1e22]">{{validDate}}</span></div>
                <div class="flex flex-col"><span class="text-[12px] text-[#6e7382] font-medium mb-0.5">Data wydania</span><span class="text-[15px] font-bold text-[#1a1e22]">{{issueDate}}</span></div>
                <div class="flex flex-col"><span class="text-[12px] text-[#6e7382] font-medium mb-0.5">Imię ojca</span><span class="text-[15px] font-bold uppercase text-[#1a1e22]">{{fatherName}}</span></div>
                <div class="flex flex-col"><span class="text-[12px] text-[#6e7382] font-medium mb-0.5">Imię matki</span><span class="text-[15px] font-bold uppercase text-[#1a1e22]">{{motherName}}</span></div>
            </div>
        </section>

        <section class="rounded-[20px] shadow-sm overflow-hidden bg-white">
            <div id="additional-data-header" class="p-5 flex justify-between items-center cursor-pointer active:bg-gray-50 transition-colors">
                <span class="text-[15px] font-bold text-[#1a1e22]">Twoje dodatkowe dane</span>
                <img id="rotate-arrow" src="../main/dowod_files/arrow.svg" class="w-5 opacity-40 transition-transform duration-300">
            </div>
            <div id="additional-data-content" class="max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
                <div class="flex flex-col gap-5 p-5 pt-0 border-t border-gray-100">
                    <div class="flex flex-col pt-4"><span class="text-[12px] text-[#6e7382] font-medium mb-0.5">Nazwisko rodowe</span><span class="text-[15px] font-bold uppercase text-[#1a1e22]">{{familySurname}}</span></div>
                    <div class="flex flex-col"><span class="text-[12px] text-[#6e7382] font-medium mb-0.5">Płeć</span><span class="text-[15px] font-bold uppercase text-[#1a1e22]">{{sex}}</span></div>
                    <div class="flex flex-col"><span class="text-[12px] text-[#6e7382] font-medium mb-0.5">Nazwisko rodowe ojca</span><span class="text-[15px] font-bold uppercase text-[#1a1e22]">{{fatherFamilySurname}}</span></div>
                    <div class="flex flex-col"><span class="text-[12px] text-[#6e7382] font-medium mb-0.5">Nazwisko rodowe matki</span><span class="text-[15px] font-bold uppercase text-[#1a1e22]">{{motherFamilySurname}}</span></div>
                    <div class="flex flex-col"><span class="text-[12px] text-[#6e7382] font-medium mb-0.5">Miejsce urodzenia</span><span class="text-[15px] font-bold uppercase text-[#1a1e22]">{{birthPlace}}</span></div>
                    <div class="flex flex-col"><span class="text-[12px] text-[#6e7382] font-medium mb-0.5">Adres zameldowania</span><span class="text-[15px] font-bold uppercase text-[#1a1e22]">{{address}}</span></div>
                    <div class="flex flex-col"><span class="text-[12px] text-[#6e7382] font-medium mb-0.5">Data zameldowania</span><span class="text-[15px] font-bold text-[#1a1e22]">{{addressDate}}</span></div>
                </div>
            </div>
        </section>

        <section class="p-4 rounded-[20px] shadow-sm flex justify-between items-center mb-10 bg-white shrink-0">
            <div class="flex flex-col">
                <span class="text-[11px] text-[#6e7382] font-medium">Ostatnia aktualizacja</span>
                <span id="update-date" class="text-[14px] font-bold text-[#1a1e22]">{{lastUpdate}}</span>
            </div>
            <button id="btn-update" class="bg-blue-50 text-blue-600 px-4 py-1.5 rounded-full font-bold text-[13px] active:scale-95 transition-all shrink-0">
                Aktualizuj
            </button>
        </section>
    </div>
</div>

<div id="connection-error" class="fixed inset-0 flex items-center justify-center z-[999] hidden px-8 bg-black/10 backdrop-blur-[2px]">
    <div class="bg-white rounded-[30px] p-10 flex flex-col items-center shadow-[0_20px_50px_rgba(0,0,0,0.2)] border border-gray-100 w-full max-w-[280px] animate-fade-in-up">
        <div class="w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mb-6">
            <span class="text-red-500 text-4xl font-light">✕</span>
        </div>
        <p class="text-[#1a1e22] text-center font-bold text-[17px] leading-tight">
            Brak połączenia z serwerem
        </p>
    </div>
</div>